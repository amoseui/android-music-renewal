machine:
  environment:
    COVERALLS_REPO_TOKEN: x1Q7YOOg8htAuoOowfRBznh3LhJtIGusP
    CI_PULL_REQUEST: true
  java:
    version: openjdk8

dependencies:
  cache_directories:
    - ~/.android
  pre:
    - echo y | android update sdk --no-ui --all --filter tool,extra-android-m2repository,extra-android-support,extra-google-google_play_services,android-25,build-tools-25.0.2

test:
  override:
    # run tests
    - ./gradlew jacocoTestReport coveralls
    # copy the build outputs to artifacts
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS
